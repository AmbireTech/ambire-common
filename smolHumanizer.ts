import { Interface } from 'ethers'
import fetch from 'node-fetch'

const iface = new Interface(['function execute(bytes,bytes[],uint256)'])

console.log(iface.parseTransaction({
  data: '0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000066229ac300000000000000000000000000000000000000000000000000000000000000040b000604000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000001906999cbae477f0296c00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002bc02aaa39b223fe8d0a0e5c4f27ead9083c756cc200271088800092ff476844f74dc2fc427974bbee2794ae000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000088800092ff476844f74dc2fc427974bbee2794ae00000000000000000000000037a8f295612602f2774d331e562be9e61b83a3270000000000000000000000000000000000000000000000000000000000000019000000000000000000000000000000000000000000000000000000000000006000000000000000000000000088800092ff476844f74dc2fc427974bbee2794ae0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000001906999cbae477f0296c',
  value: 1000000000000000000n
}))



async function fetchJson (url: string, body: object, args: object = {}) {
	const headers = { 'Content-Type': 'application/json' }
	const res = await fetch(url, { method: 'POST', body: JSON.stringify(body), headers, ...args })
	return res.json()
}

async function fetchRpc(url: string, method: string, params: any[] = []) {
	return fetchJson(url, { method, params, id: 1, jsonrpc: '2.0' })
}

// @TODO dynamic URL
const url = 'https://invictus.ambire.com/ethereum'
async function scrapeSignatures () {
	console.log(await fetchRpc(url, 'eth_blockNumber'))
}


scrapeSignatures()
	.catch((e: any) => console.error(e))