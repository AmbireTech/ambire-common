{"version":3,"file":"richJson.js","sourceRoot":"","sources":["../../../../src/libs/richJson/richJson.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;GAcG;AAEH,MAAM,UAAU,SAAS,CAAC,GAAQ;IAChC,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;QACxC,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC7B,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAA;SACrC;QAED,IAAI,KAAK,YAAY,KAAK,EAAE;YAC1B,MAAM,KAAK,GAAQ,EAAE,CAAA;YAErB,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACrD,aAAa;gBACb,KAAK,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAA;YACnC,CAAC,CAAC,CAAA;YAEF,OAAO,KAAK,CAAA;SACb;QAED,OAAO,KAAK,CAAA;IACd,CAAC,CAAC,CAAA;AACJ,CAAC;AAED,MAAM,UAAU,KAAK,CAAC,IAAY;IAChC,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;QACrC,IAAI,KAAK,EAAE,OAAO,EAAE;YAClB,OAAO,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;SAC7B;QAED,IAAI,KAAK,EAAE,KAAK,EAAE,UAAU,CAAC,OAAO,CAAC,EAAE;YACrC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;YACtC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACrD,IAAI,QAAQ,KAAK,SAAS,EAAE;oBAC1B,aAAa;oBACb,KAAK,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAA;iBAClC;YACH,CAAC,CAAC,CAAA;YAEF,OAAO,KAAK,CAAA;SACb;QAED,OAAO,KAAK,CAAA;IACd,CAAC,CAAC,CAAA;AACJ,CAAC","sourcesContent":["/**\n *\n * richJson lib\n *\n * JSON.serialize and JSON.parse don't support BigInt values.\n * To address this limitation, we have created this small library that adds support for BigInt numbers\n * during JSON serialization and parsing.\n *\n * Limitations: The library does not currently support BigInt values in new Map, Set, or Uint8Array.\n * However, extending and adding support can be easily accomplished if needed.\n * @credits: https://dev.to/benlesh/bigint-and-json-stringify-json-parse-2m8p\n *\n *\n * Additionally, JSON.serialize and JSON.parse do not properly serialize the Error object, so we extend that functionality here as well.\n */\n\nexport function stringify(obj: any): string {\n  return JSON.stringify(obj, (key, value) => {\n    if (typeof value === 'bigint') {\n      return { $bigint: value.toString() }\n    }\n\n    if (value instanceof Error) {\n      const error: any = {}\n\n      Object.getOwnPropertyNames(value).forEach((propName) => {\n        // @ts-ignore\n        error[propName] = value[propName]\n      })\n\n      return error\n    }\n\n    return value\n  })\n}\n\nexport function parse(json: string) {\n  return JSON.parse(json, (key, value) => {\n    if (value?.$bigint) {\n      return BigInt(value.$bigint)\n    }\n\n    if (value?.stack?.startsWith('Error')) {\n      const error = new Error(value.message)\n      Object.getOwnPropertyNames(value).forEach((propName) => {\n        if (propName !== 'message') {\n          // @ts-ignore\n          error[propName] = value[propName]\n        }\n      })\n\n      return error\n    }\n\n    return value\n  })\n}\n"]}