{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../../../src/libs/errorDecoder/handlers/internal.ts"],"names":[],"mappings":";;AAAA,2CAA2C;AAC3C,oCAAgE;AAEhE,MAAM,oBAAoB,GAAG,CAAC,iBAAiB,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAA;AAElF,MAAM,eAAe;IACZ,OAAO,CAAC,IAAY,EAAE,KAAU;QACrC,OAAO,CACL,KAAK,YAAY,SAAS;YAC1B,KAAK,YAAY,cAAc;YAC/B,KAAK,YAAY,WAAW;YAC5B,KAAK,YAAY,UAAU,CAC5B,CAAA;IACH,CAAC;IAEM,MAAM,CAAC,IAAY,EAAE,KAAU;QACpC,MAAM,mBAAmB,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAC/D,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC,MAAM,CAAC,CAChC,CAAA;QAED,IAAI,mBAAmB,EAAE,CAAC;YACxB,OAAO;gBACL,IAAI,EAAE,iBAAS,CAAC,iBAAiB;gBACjC,MAAM,EAAE,mBAAmB;gBAC3B,IAAI,EAAE,KAAK,CAAC,OAAO;aACpB,CAAA;QACH,CAAC;QAED,OAAO;YACL,IAAI,EAAE,iBAAS,CAAC,SAAS;YACzB,MAAM,EAAE,KAAK,CAAC,IAAI;YAClB,IAAI;SACL,CAAA;IACH,CAAC;CACF;AAED,kBAAe,eAAe,CAAA","sourcesContent":["/* eslint-disable class-methods-use-this */\nimport { DecodedError, ErrorHandler, ErrorType } from '../types'\n\nconst CONNECTIVITY_REASONS = ['Failed to fetch', 'NetworkError', 'Failed to load']\n\nclass InternalHandler implements ErrorHandler {\n  public matches(data: string, error: any) {\n    return (\n      error instanceof TypeError ||\n      error instanceof ReferenceError ||\n      error instanceof SyntaxError ||\n      error instanceof RangeError\n    )\n  }\n\n  public handle(data: string, error: any): DecodedError {\n    const isConnectivityError = CONNECTIVITY_REASONS.some((reason) =>\n      error.message?.includes(reason)\n    )\n\n    if (isConnectivityError) {\n      return {\n        type: ErrorType.ConnectivityError,\n        reason: 'ConnectivityError',\n        data: error.message\n      }\n    }\n\n    return {\n      type: ErrorType.CodeError,\n      reason: error.name,\n      data\n    }\n  }\n}\n\nexport default InternalHandler\n"]}