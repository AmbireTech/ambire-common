{"version":3,"file":"estimateHelpers.js","sourceRoot":"","sources":["../../../../src/libs/estimate/estimateHelpers.ts"],"names":[],"mappings":";;;AAAA,mCAAoC;AAKpC,SAAgB,sBAAsB,CACpC,SAAwB,EACxB,OAAgB;IAEhB,IAAI,CAAC,SAAS,CAAC,MAAM;QAAE,OAAO,IAAI,CAAA;IAElC,MAAM,YAAY,GAAG,SAAS,CAAC,IAAI,CACjC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,CAC/D,CAAA;IACD,MAAM,UAAU,GAAG,SAAS,CAAC,IAAI,CAC/B,CAAC,QAAQ,EAAE,EAAE,CACX,QAAQ,CAAC,OAAO,KAAK,oBAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,CACxF,CAAA;IACD,MAAM,WAAW,GAAG,SAAS,CAAC,IAAI,CAChC,CAAC,QAAQ,EAAE,EAAE,CACX,QAAQ,CAAC,OAAO,KAAK,oBAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,CACxF,CAAA;IAED,qEAAqE;IACrE,uEAAuE;IACvE,IAAI,OAAO,CAAC,YAAY,EAAE;QACxB,IAAI,YAAY;YAAE,OAAO,YAAY,CAAA;QACrC,IAAI,UAAU;YAAE,OAAO,UAAU,CAAA;QACjC,OAAO,WAAW,IAAI,IAAI,CAAA;KAC3B;IAED,gEAAgE;IAChE,IAAI,UAAU;QAAE,OAAO,UAAU,CAAA;IACjC,IAAI,WAAW;QAAE,OAAO,WAAW,CAAA;IACnC,OAAO,YAAY,IAAI,IAAI,CAAA;AAC7B,CAAC;AA9BD,wDA8BC","sourcesContent":["import { ZeroAddress } from 'ethers'\n\nimport { Network } from '../../interfaces/network'\nimport { TokenResult } from '../portfolio'\n\nexport function getFeeTokenForEstimate(\n  feeTokens: TokenResult[],\n  network: Network\n): TokenResult | null {\n  if (!feeTokens.length) return null\n\n  const gasTankToken = feeTokens.find(\n    (feeToken) => feeToken.flags.onGasTank && feeToken.amount > 0n\n  )\n  const erc20token = feeTokens.find(\n    (feeToken) =>\n      feeToken.address !== ZeroAddress && !feeToken.flags.onGasTank && feeToken.amount > 0n\n  )\n  const nativeToken = feeTokens.find(\n    (feeToken) =>\n      feeToken.address === ZeroAddress && !feeToken.flags.onGasTank && feeToken.amount > 0n\n  )\n\n  // for optimistic L2s, prioritize the gas tank token as a fee payment\n  // option as its callData costs more than the actual transfer of tokens\n  if (network.isOptimistic) {\n    if (gasTankToken) return gasTankToken\n    if (erc20token) return erc20token\n    return nativeToken ?? null\n  }\n\n  // for L1s, prioritize erc20 transfer as it's the most expensive\n  if (erc20token) return erc20token\n  if (nativeToken) return nativeToken\n  return gasTankToken ?? null\n}\n"]}