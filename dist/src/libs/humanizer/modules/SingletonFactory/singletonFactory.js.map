{"version":3,"file":"singletonFactory.js","sourceRoot":"","sources":["../../../../../../src/libs/humanizer/modules/SingletonFactory/singletonFactory.ts"],"names":[],"mappings":";;;AAAA,mCAA8C;AAI9C,uCAA0E;AAE1E,MAAM,wBAAwB,GAAG,4CAA4C,CAAA;AACtE,MAAM,gBAAgB,GAAwB,CAAC,CAAY,EAAE,OAAiB,EAAE,EAAE;IACvF,MAAM,KAAK,GAAG,IAAI,kBAAS,CAAC,CAAC,iCAAiC,CAAC,CAAC,CAAA;IAChE,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;QACpC,kCAAkC;QAClC,IACE,IAAA,mBAAU,EAAC,IAAI,CAAC,EAAE,CAAC,KAAK,wBAAwB;YAChD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAE,CAAC,QAAQ,EAChE;YACA,OAAO;gBACL,GAAG,IAAI;gBACP,iBAAiB,EAAE;oBACjB,IAAA,iBAAS,EAAC,mBAAmB,CAAC;oBAC9B,IAAA,gBAAQ,EAAC,KAAK,CAAC;oBACf,IAAA,+BAAuB,EAAC,wBAAwB,CAAC;iBAClD;aACF,CAAA;SACF;QACD,OAAO,IAAI,CAAA;IACb,CAAC,CAAC,CAAA;IACF,OAAO,QAAQ,CAAA;AACjB,CAAC,CAAA;AApBY,QAAA,gBAAgB,oBAoB5B","sourcesContent":["import { getAddress, Interface } from 'ethers'\n\nimport { AccountOp } from '../../../accountOp/accountOp'\nimport { HumanizerCallModule, IrCall } from '../../interfaces'\nimport { getAction, getAddressVisualization, getLabel } from '../../utils'\n\nconst CONTRACT_FACTORY_ADDRESS = '0xce0042B868300000d44A59004Da54A005ffdcf9f'\nexport const singletonFactory: HumanizerCallModule = (_: AccountOp, irCalls: IrCall[]) => {\n  const iface = new Interface(['function  deploy(bytes,bytes32)'])\n  const newCalls = irCalls.map((call) => {\n    // @TODO fix those upper/lowercase\n    if (\n      getAddress(call.to) === CONTRACT_FACTORY_ADDRESS &&\n      call.data.slice(0, 10) === iface.getFunction('deploy')!.selector\n    ) {\n      return {\n        ...call,\n        fullVisualization: [\n          getAction('Deploy a contract'),\n          getLabel('via'),\n          getAddressVisualization(CONTRACT_FACTORY_ADDRESS)\n        ]\n      }\n    }\n    return call\n  })\n  return newCalls\n}\n"]}