{ "abi": [{ "inputs": [{ "internalType": "contract IAmbireAccount", "name": "account", "type": "address" }, { "internalType": "address[]", "name": "tokenAddrs", "type": "address[]" }], "name": "getBalances", "outputs": [{ "components": [{ "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }, { "internalType": "bytes", "name": "error", "type": "bytes" }], "internalType": "struct BalanceGetter.TokenInfo[]", "name": "", "type": "tuple[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "contract IAmbireAccount", "name": "account", "type": "address" }, { "internalType": "address[]", "name": "tokenAddrs", "type": "address[]" }], "name": "getBalancesWithInfo", "outputs": [{ "components": [{ "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }, { "internalType": "bytes", "name": "error", "type": "bytes" }], "internalType": "struct BalanceGetter.TokenInfo[]", "name": "", "type": "tuple[]" }, { "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "contract IAmbireAccount", "name": "account", "type": "address" }, { "internalType": "contract IERC20", "name": "token", "type": "address" }], "name": "getERC20TokenInfo", "outputs": [{ "components": [{ "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }, { "internalType": "bytes", "name": "error", "type": "bytes" }], "internalType": "struct BalanceGetter.TokenInfo", "name": "info", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "contract IAmbireAccount", "name": "account", "type": "address" }, { "internalType": "address", "name": "factory", "type": "address" }, { "internalType": "bytes", "name": "factoryCalldata", "type": "bytes" }, { "components": [{ "internalType": "uint256", "name": "nonce", "type": "uint256" }, { "components": [{ "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }, { "internalType": "bytes", "name": "data", "type": "bytes" }], "internalType": "struct IAmbireAccount.Transaction[]", "name": "txns", "type": "tuple[]" }, { "internalType": "bytes", "name": "signature", "type": "bytes" }], "internalType": "struct Simulation.ToSimulate[]", "name": "toSimulate", "type": "tuple[]" }], "name": "simulate", "outputs": [{ "internalType": "uint256", "name": "startingNonce", "type": "uint256" }, { "internalType": "bool", "name": "", "type": "bool" }, { "internalType": "bytes", "name": "", "type": "bytes" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "contract IAmbireAccount", "name": "account", "type": "address" }, { "internalType": "address[]", "name": "tokenAddrs", "type": "address[]" }, { "internalType": "address", "name": "factory", "type": "address" }, { "internalType": "bytes", "name": "factoryCalldata", "type": "bytes" }, { "components": [{ "internalType": "uint256", "name": "nonce", "type": "uint256" }, { "components": [{ "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }, { "internalType": "bytes", "name": "data", "type": "bytes" }], "internalType": "struct IAmbireAccount.Transaction[]", "name": "txns", "type": "tuple[]" }, { "internalType": "bytes", "name": "signature", "type": "bytes" }], "internalType": "struct Simulation.ToSimulate[]", "name": "toSimulate", "type": "tuple[]" }], "name": "simulateAndGetBalances", "outputs": [{ "components": [{ "components": [{ "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }, { "internalType": "bytes", "name": "error", "type": "bytes" }], "internalType": "struct BalanceGetter.TokenInfo[]", "name": "balances", "type": "tuple[]" }, { "internalType": "uint256", "name": "nonce", "type": "uint256" }], "internalType": "struct BalanceGetter.BalancesAtNonce", "name": "before", "type": "tuple" }, { "components": [{ "components": [{ "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }, { "internalType": "bytes", "name": "error", "type": "bytes" }], "internalType": "struct BalanceGetter.TokenInfo[]", "name": "balances", "type": "tuple[]" }, { "internalType": "uint256", "name": "nonce", "type": "uint256" }], "internalType": "struct BalanceGetter.BalancesAtNonce", "name": "afterSimulation", "type": "tuple" }, { "internalType": "bytes", "name": "", "type": "bytes" }, { "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }], "bin": "0x6080806040523461001657610fed908161001c8239f35b600080fdfe6040608081526004908136101561001557600080fd5b600090813560e01c80632c33eab01461039a578063581970241461035f5780636a385ae91461033057806373e4a467146102515763745a93d81461005857600080fd5b3461024d578060031936011261024d57610070610436565b91602435936001600160a01b0394858116809103610249576100906106bd565b958451957f70a0823100000000000000000000000000000000000000000000000000000000875216828601526020948581602481855afa90811561020e578491610218575b508587015283517f95d89b4100000000000000000000000000000000000000000000000000000000815283818481855afa90811561020e579086929185916101c1575b5087528451928380927f313ce5670000000000000000000000000000000000000000000000000000000082525afa9182156101b6578092610175575b50509060ff610171921681850152519282849384528301906105fd565b0390f35b9091508382813d83116101af575b61018d81836104bb565b810103126101ac57509060ff6101a561017193610734565b9192610154565b80fd5b503d610183565b8351903d90823e3d90fd5b919250503d8085833e6101d481836104bb565b810190868183031261020a5780519067ffffffffffffffff82116102065791610200918894930161071a565b38610118565b8580fd5b8480fd5b85513d86823e3d90fd5b90508581813d8311610242575b61022f81836104bb565b8101031261023e5751386100d5565b8380fd5b503d610225565b8280fd5b5080fd5b5090346101ac5760a03660031901126101ac5761026c610436565b9067ffffffffffffffff6024358181116102495761028d9036908701610540565b9095604435926001600160a01b038416840361020a57606435818111610206576102ba90369084016104f9565b946084359182116101ac5750936102ec9361030698936102e4610314989461032198369101610540565b959094610ab9565b94939692839691965198899860a08a5260a08a019061069d565b9088820360208a015261069d565b9186830390870152610594565b91606084015260808301520390f35b503461024d576101719061034c610346366105b9565b916107fd565b9051918291602083526020830190610641565b503461024d5761038b90610375610346366105b9565b905a908051938493606085526060850190610641565b91602084015243908301520390f35b509190346101ac5760803660031901126101ac576103b6610436565b90602435926001600160a01b038416840361024d5767ffffffffffffffff60443581811161023e576103eb90369084016104f9565b926064359182116101ac5750926104179261040f6060969361017196369101610540565b939092610bf5565b9193909480519586958652151560208601528401526060830190610594565b600435906001600160a01b038216820361044c57565b600080fd5b6080810190811067ffffffffffffffff82111761046d57604052565b634e487b7160e01b600052604160045260246000fd5b6040810190811067ffffffffffffffff82111761046d57604052565b6020810190811067ffffffffffffffff82111761046d57604052565b90601f8019910116810190811067ffffffffffffffff82111761046d57604052565b67ffffffffffffffff811161046d57601f01601f191660200190565b81601f8201121561044c57803590610510826104dd565b9261051e60405194856104bb565b8284526020838301011161044c57816000926020809301838601378301015290565b9181601f8401121561044c5782359167ffffffffffffffff831161044c576020808501948460051b01011161044c57565b60005b8381106105845750506000910152565b8181015183820152602001610574565b906020916105ad81518092818552858086019101610571565b601f01601f1916010190565b90604060031983011261044c576004356001600160a01b038116810361044c57916024359067ffffffffffffffff821161044c576105f991600401610540565b9091565b61063e9160606106168351608084526080840190610594565b926020810151602084015260ff60408201511660408401520151906060818403910152610594565b90565b908082519081815260208091019281808460051b8301019501936000915b84831061066f5750505050505090565b909192939495848061068d600193601f198682030187528a516105fd565b980193019301919493929061065f565b906020806106b48451604085526040850190610641565b93015191015290565b604051906106ca82610451565b6060808381815260006020820152600060408201520152565b909291926106f0816104dd565b916106fe60405193846104bb565b82948284528282011161044c576020610718930190610571565b565b9080601f8301121561044c57815161063e926020016106e3565b519060ff8216820361044c57565b67ffffffffffffffff811161046d5760051b60200190565b60001981146107695760010190565b634e487b7160e01b600052601160045260246000fd5b919081101561078f5760051b0190565b634e487b7160e01b600052603260045260246000fd5b356001600160a01b038116810361044c5790565b805182101561078f5760209160051b010190565b3d156107f8573d906107de826104dd565b916107ec60405193846104bb565b82523d6000602084013e565b606090565b909161080881610742565b92604092610818845195866104bb565b828552601f1961082784610742565b0160005b818110610a7757505060005b83811061084657505050505090565b6001600160a01b03908161086361085e83888861077f565b6107a5565b166108f1576108ec91831631865161087a8161049f565b6000815287519161088a83610451565b885161089581610483565b600381526020907f455448000000000000000000000000000000000000000000000000000000000082820152845283015260128883015260608201526108db82896107b9565b526108e681886107b9565b5061075a565b610837565b8161090061085e83888861077f565b16918651927f745a93d80000000000000000000000000000000000000000000000000000000084526004918516828501526024840152600083604481305afa806000916109c0575b6108ec94506109b4575061095a6107cd565b80519091901561097a57505b6060610972838a6107b9565b51015261075a565b8751915061098782610483565b81527f756e6b6e000000000000000000000000000000000000000000000000000000006020820152610966565b90506108db82896107b9565b919293903d8082843e6109d381846104bb565b820160209182848303126101ac57835167ffffffffffffffff9485821161024957019260808484031261024d578b5194610a0c86610451565b845181811161023e5784610a2191870161071a565b86528185015182870152610a368d8601610734565b8d8701526060948581015191821161023e57019183601f840112156101ac575091816108ec989796959493610a6d935191016106e3565b9082015290610948565b602090610a826106bd565b82828a0101520161082b565b604051906040820182811067ffffffffffffffff82111761046d576040526000602083606081520152565b9296939495610ae89196610acb610a8e565b96610ad4610a8e565b99610ae0868b896107fd565b895286610bf5565b90602097928888015215610ba3575060405163057ff68760e51b815260009680826004818b6001600160a01b038a165af1918215610b98578892610b65575b5081818a015286015103610b52575b50505060405192610b468461049f565b83525a91939291904390565b610b5b926107fd565b8452388080610b36565b9080925081813d8311610b91575b610b7d81836104bb565b81010312610b8d57519038610b27565b8780fd5b503d610b73565b6040513d8a823e3d90fd5b95505050505a91939291904390565b919081101561078f5760051b81013590605e198136030182121561044c570190565b908060209392818452848401376000828201840152601f01601f1916010190565b939291906001600160a01b0385163b15610f86575b505060405163057ff68760e51b815260208160048160006001600160a01b0389165af1908115610f4857600091610f54575b509160005b818110610c6557505050905060405190610c5a8261049f565b600082529160019190565b60405163057ff68760e51b815260208160048160006001600160a01b038b165af1908115610f4857600091610f16575b50610ca1828486610bb2565b3514610cb6575b610cb19061075a565b610c41565b610cc1818385610bb2565b6020810135601e19808336030182121561044c5767ffffffffffffffff828401351161044c578183013560051b36036020838501011361044c57610d06848688610bb2565b6040810135918136030182121561044c57019167ffffffffffffffff83351161044c5782353603602084011361044c576001600160a01b0388163b1561044c576040519182917f6171d1c900000000000000000000000000000000000000000000000000000000835260448301604060048501528282013590526064808401908383013560051b85010192602081840101926000915b808201358310610e305750505050509080610dcc6000936024966003198483030188850152602081359101610bd4565b0381836001600160a01b038c165af19182610e02575b5050610dfd575050509050610df56107cd565b909160009190565b610ca8565b67ffffffffffffffff8211610e1c57506040523880610de2565b634e487b7160e01b60005260416004526000fd5b919395509193606319878203018552607e198284013603018635121561044c57602082840187350101356001600160a01b038116810361044c576001600160a01b031681528535838301016040810135602083015236819003603e1901606090910135121561044c5767ffffffffffffffff602083850188350160608101350101351161044c57606086358484010190810135016020810135360360409091011361044c57606060408083018290526001926020928392610f04928201918b35898901019081013501808501359101610bd4565b97019501930190918695949392610d9c565b90506020813d602011610f40575b81610f31602093836104bb565b8101031261044c575138610c95565b3d9150610f24565b6040513d6000823e3d90fd5b90506020813d602011610f7e575b81610f6f602093836104bb565b8101031261044c575138610c3c565b3d9150610f62565b81600092918360208194519301915af1610f9e6107cd565b9015610faa5780610c0a565b925050506000916000919056fea2646970667358221220c422b0b0d792010bbe3ae3da5ab9b466e72a51d10a22e64c5cc2cb9c17f2da6564736f6c63430008130033", "binRuntime": "0x6040608081526004908136101561001557600080fd5b600090813560e01c80632c33eab01461039a578063581970241461035f5780636a385ae91461033057806373e4a467146102515763745a93d81461005857600080fd5b3461024d578060031936011261024d57610070610436565b91602435936001600160a01b0394858116809103610249576100906106bd565b958451957f70a0823100000000000000000000000000000000000000000000000000000000875216828601526020948581602481855afa90811561020e578491610218575b508587015283517f95d89b4100000000000000000000000000000000000000000000000000000000815283818481855afa90811561020e579086929185916101c1575b5087528451928380927f313ce5670000000000000000000000000000000000000000000000000000000082525afa9182156101b6578092610175575b50509060ff610171921681850152519282849384528301906105fd565b0390f35b9091508382813d83116101af575b61018d81836104bb565b810103126101ac57509060ff6101a561017193610734565b9192610154565b80fd5b503d610183565b8351903d90823e3d90fd5b919250503d8085833e6101d481836104bb565b810190868183031261020a5780519067ffffffffffffffff82116102065791610200918894930161071a565b38610118565b8580fd5b8480fd5b85513d86823e3d90fd5b90508581813d8311610242575b61022f81836104bb565b8101031261023e5751386100d5565b8380fd5b503d610225565b8280fd5b5080fd5b5090346101ac5760a03660031901126101ac5761026c610436565b9067ffffffffffffffff6024358181116102495761028d9036908701610540565b9095604435926001600160a01b038416840361020a57606435818111610206576102ba90369084016104f9565b946084359182116101ac5750936102ec9361030698936102e4610314989461032198369101610540565b959094610ab9565b94939692839691965198899860a08a5260a08a019061069d565b9088820360208a015261069d565b9186830390870152610594565b91606084015260808301520390f35b503461024d576101719061034c610346366105b9565b916107fd565b9051918291602083526020830190610641565b503461024d5761038b90610375610346366105b9565b905a908051938493606085526060850190610641565b91602084015243908301520390f35b509190346101ac5760803660031901126101ac576103b6610436565b90602435926001600160a01b038416840361024d5767ffffffffffffffff60443581811161023e576103eb90369084016104f9565b926064359182116101ac5750926104179261040f6060969361017196369101610540565b939092610bf5565b9193909480519586958652151560208601528401526060830190610594565b600435906001600160a01b038216820361044c57565b600080fd5b6080810190811067ffffffffffffffff82111761046d57604052565b634e487b7160e01b600052604160045260246000fd5b6040810190811067ffffffffffffffff82111761046d57604052565b6020810190811067ffffffffffffffff82111761046d57604052565b90601f8019910116810190811067ffffffffffffffff82111761046d57604052565b67ffffffffffffffff811161046d57601f01601f191660200190565b81601f8201121561044c57803590610510826104dd565b9261051e60405194856104bb565b8284526020838301011161044c57816000926020809301838601378301015290565b9181601f8401121561044c5782359167ffffffffffffffff831161044c576020808501948460051b01011161044c57565b60005b8381106105845750506000910152565b8181015183820152602001610574565b906020916105ad81518092818552858086019101610571565b601f01601f1916010190565b90604060031983011261044c576004356001600160a01b038116810361044c57916024359067ffffffffffffffff821161044c576105f991600401610540565b9091565b61063e9160606106168351608084526080840190610594565b926020810151602084015260ff60408201511660408401520151906060818403910152610594565b90565b908082519081815260208091019281808460051b8301019501936000915b84831061066f5750505050505090565b909192939495848061068d600193601f198682030187528a516105fd565b980193019301919493929061065f565b906020806106b48451604085526040850190610641565b93015191015290565b604051906106ca82610451565b6060808381815260006020820152600060408201520152565b909291926106f0816104dd565b916106fe60405193846104bb565b82948284528282011161044c576020610718930190610571565b565b9080601f8301121561044c57815161063e926020016106e3565b519060ff8216820361044c57565b67ffffffffffffffff811161046d5760051b60200190565b60001981146107695760010190565b634e487b7160e01b600052601160045260246000fd5b919081101561078f5760051b0190565b634e487b7160e01b600052603260045260246000fd5b356001600160a01b038116810361044c5790565b805182101561078f5760209160051b010190565b3d156107f8573d906107de826104dd565b916107ec60405193846104bb565b82523d6000602084013e565b606090565b909161080881610742565b92604092610818845195866104bb565b828552601f1961082784610742565b0160005b818110610a7757505060005b83811061084657505050505090565b6001600160a01b03908161086361085e83888861077f565b6107a5565b166108f1576108ec91831631865161087a8161049f565b6000815287519161088a83610451565b885161089581610483565b600381526020907f455448000000000000000000000000000000000000000000000000000000000082820152845283015260128883015260608201526108db82896107b9565b526108e681886107b9565b5061075a565b610837565b8161090061085e83888861077f565b16918651927f745a93d80000000000000000000000000000000000000000000000000000000084526004918516828501526024840152600083604481305afa806000916109c0575b6108ec94506109b4575061095a6107cd565b80519091901561097a57505b6060610972838a6107b9565b51015261075a565b8751915061098782610483565b81527f756e6b6e000000000000000000000000000000000000000000000000000000006020820152610966565b90506108db82896107b9565b919293903d8082843e6109d381846104bb565b820160209182848303126101ac57835167ffffffffffffffff9485821161024957019260808484031261024d578b5194610a0c86610451565b845181811161023e5784610a2191870161071a565b86528185015182870152610a368d8601610734565b8d8701526060948581015191821161023e57019183601f840112156101ac575091816108ec989796959493610a6d935191016106e3565b9082015290610948565b602090610a826106bd565b82828a0101520161082b565b604051906040820182811067ffffffffffffffff82111761046d576040526000602083606081520152565b9296939495610ae89196610acb610a8e565b96610ad4610a8e565b99610ae0868b896107fd565b895286610bf5565b90602097928888015215610ba3575060405163057ff68760e51b815260009680826004818b6001600160a01b038a165af1918215610b98578892610b65575b5081818a015286015103610b52575b50505060405192610b468461049f565b83525a91939291904390565b610b5b926107fd565b8452388080610b36565b9080925081813d8311610b91575b610b7d81836104bb565b81010312610b8d57519038610b27565b8780fd5b503d610b73565b6040513d8a823e3d90fd5b95505050505a91939291904390565b919081101561078f5760051b81013590605e198136030182121561044c570190565b908060209392818452848401376000828201840152601f01601f1916010190565b939291906001600160a01b0385163b15610f86575b505060405163057ff68760e51b815260208160048160006001600160a01b0389165af1908115610f4857600091610f54575b509160005b818110610c6557505050905060405190610c5a8261049f565b600082529160019190565b60405163057ff68760e51b815260208160048160006001600160a01b038b165af1908115610f4857600091610f16575b50610ca1828486610bb2565b3514610cb6575b610cb19061075a565b610c41565b610cc1818385610bb2565b6020810135601e19808336030182121561044c5767ffffffffffffffff828401351161044c578183013560051b36036020838501011361044c57610d06848688610bb2565b6040810135918136030182121561044c57019167ffffffffffffffff83351161044c5782353603602084011361044c576001600160a01b0388163b1561044c576040519182917f6171d1c900000000000000000000000000000000000000000000000000000000835260448301604060048501528282013590526064808401908383013560051b85010192602081840101926000915b808201358310610e305750505050509080610dcc6000936024966003198483030188850152602081359101610bd4565b0381836001600160a01b038c165af19182610e02575b5050610dfd575050509050610df56107cd565b909160009190565b610ca8565b67ffffffffffffffff8211610e1c57506040523880610de2565b634e487b7160e01b60005260416004526000fd5b919395509193606319878203018552607e198284013603018635121561044c57602082840187350101356001600160a01b038116810361044c576001600160a01b031681528535838301016040810135602083015236819003603e1901606090910135121561044c5767ffffffffffffffff602083850188350160608101350101351161044c57606086358484010190810135016020810135360360409091011361044c57606060408083018290526001926020928392610f04928201918b35898901019081013501808501359101610bd4565b97019501930190918695949392610d9c565b90506020813d602011610f40575b81610f31602093836104bb565b8101031261044c575138610c95565b3d9150610f24565b6040513d6000823e3d90fd5b90506020813d602011610f7e575b81610f6f602093836104bb565b8101031261044c575138610c3c565b3d9150610f62565b81600092918360208194519301915af1610f9e6107cd565b9015610faa5780610c0a565b925050506000916000919056fea2646970667358221220c422b0b0d792010bbe3ae3da5ab9b466e72a51d10a22e64c5cc2cb9c17f2da6564736f6c63430008130033" }
